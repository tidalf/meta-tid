From 0fc8844af597b1eb49c3adc2ccdacb489ba2f96d Mon Sep 17 00:00:00 2001
From: Cui Gao <gao.cui@windsolve.com>
Date: Sun, 3 Aug 2014 00:58:01 +0800
Subject: [PATCH 12/15] add support of spdif for curie board

---
 arch/arm/boot/dts/imx6qdl-curie.dtsi |   13 +++++++++++++
 arch/arm/boot/dts/imx6qdl.dtsi       |    6 ++++++
 2 files changed, 19 insertions(+)

diff --git a/arch/arm/boot/dts/imx6qdl-curie.dtsi b/arch/arm/boot/dts/imx6qdl-curie.dtsi
index 5d80574..2335de4 100644
--- a/arch/arm/boot/dts/imx6qdl-curie.dtsi
+++ b/arch/arm/boot/dts/imx6qdl-curie.dtsi
@@ -93,6 +93,13 @@
 		status = "okay";
 	};
 
+	sound-spdif {
+		compatible = "fsl,imx-audio-spdif",
+			   "fsl,imx-curie-spdif";
+		model = "imx-spdif";
+		spdif-controller = <&spdif>;
+		spdif-out;
+	};
 };
 
 &uart1 {
@@ -307,3 +314,9 @@
 	status = "okay";
 };
 
+&spdif {
+	pinctrl-names = "default";
+	pinctrl-0 = <&pinctrl_spdif_3>;
+	status = "okay";
+};
+
diff --git a/arch/arm/boot/dts/imx6qdl.dtsi b/arch/arm/boot/dts/imx6qdl.dtsi
index 2cb5ae0..24136f4 100644
--- a/arch/arm/boot/dts/imx6qdl.dtsi
+++ b/arch/arm/boot/dts/imx6qdl.dtsi
@@ -1480,6 +1480,12 @@
 				MX6QDL_PAD_GPIO_17__SPDIF_OUT 0x1b0b0
 			>;
 		};
+
+		pinctrl_spdif_3: spdifgrp-3 {
+			fsl,pins = <
+				MX6QDL_PAD_ENET_RXD0__SPDIF_OUT 0x1b0b0
+			>;
+		};
 	};
 
 	uart1 {
-- 
1.7.9.5

